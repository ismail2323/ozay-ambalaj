/**
 * Translations for Öz-Ay Ambalaj Website
 * Manual translations for all supported languages
 */

window.Translations = {
    en: {
        // Navigation
        'nav.home': 'Home',
        'nav.about': 'About Us',
        'nav.products': 'Products',
        'nav.quality': 'Quality',
        'nav.references': 'References',
        'nav.news': 'News',
        'nav.contact': 'Contact',
        
        // Hero Section
        'hero.title': 'Trust in Packaging,<br>Sustainability in Production',
        'hero.subtitle': 'As Öz-Ay Packaging and Plastic, we are a leader in the industry with environmentally friendly packaging solutions. We add value to our customers with our innovative production technologies and sustainable approach.',
        'hero.cta': 'Contact Us Now',
        
        // Products
        'products.title': 'Our Products',
        'products.subtitle': 'We offer professional solutions for all your packaging needs with our wide product range',
        'products.kutu': 'Box',
        'products.baskili_poset': 'Printed Bag',
        'products.kagit_ambalaj': 'Paper Packaging',
        'products.kagit_poset': 'Paper Bag',
        'products.pasta_alti': 'Cake Base',
        'products.kese_kagidi': 'Paper Sack',
        'products.request_quote': 'Request Quote',
        
        // Sustainability
        'sustainability.title': 'Sustainability and Environment',
        'sustainability.subtitle': 'We invest in the future with recyclable materials',
        'sustainability.description': 'A large part of the materials we use in our production are recyclable and environmentally friendly. With our sustainable production approach, we respect nature and leave a more livable world for future generations.',
        'sustainability.recyclable': 'Recyclable',
        
        // References
        'references.title': 'Our References',
        'references.subtitle': 'We serve Turkey\'s leading brands',
        'references.all_references': 'All References',
        
        // News
        'news.title': 'News',
        'news.subtitle': 'Latest news from our company and the industry',
        'news.all_news': 'All News',
        
        // Contact
        'contact.title': 'Contact',
        'contact.form.name': 'Full Name',
        'contact.form.email': 'Email',
        'contact.form.phone': 'Phone',
        'contact.form.company': 'Company',
        'contact.form.subject': 'Subject',
        'contact.form.message': 'Message',
        'contact.form.kvkk': 'I have read and approve the KVKK Disclosure Text',
        'contact.form.send': 'Send',
        
        // Footer
        'footer.address': 'Address',
        'footer.phone': 'Phone',
        'footer.email': 'Email',
        'footer.working_hours': 'Working Hours',
        'footer.weekdays': 'Monday - Friday: 08:00 - 18:00',
        'footer.weekends': 'Saturday - Sunday: 09:00 - 14:00',
        'footer.quick_links': 'Quick Links',
        'footer.about': 'About Us',
        'footer.products': 'Our Products',
        'footer.quality': 'Quality & Sustainability',
        'footer.references': 'Our References',
        'footer.news': 'News',
        'footer.contact': 'Contact',
        'footer.description': 'A pioneer in environmentally friendly and sustainable packaging solutions. A trusted brand in the industry since 2010 with a quality production and customer satisfaction-oriented service approach.',
        'footer.copyright': '© 2022 Artinlife Tech. All rights reserved.',
        'footer.privacy': 'Privacy Policy',
        'footer.cookie': 'Cookie Policy',
        
        // Common
        'common.discover_products': 'Discover Our Products',
        'common.details': 'Details',
        'common.read_more': 'Read More',
        'common.select': 'Select',
        'common.product_info': 'Product Information',
        'common.technical_support': 'Technical Support',
        'common.other': 'Other',
        'common.read_text': '(Read Text)',
        'common.years_experience': 'Years of Experience',
        'common.happy_customers': 'Happy Customers',
        'common.daily_production': 'Daily Production',
        'common.customer_satisfaction': 'Customer Satisfaction',
        'common.contact_us': 'Contact Us Now',
        
        // About Page
        'about.title': 'About Us',
        'about.subtitle': 'Our experience and solutions in the industry as Öz-Ay Packaging and Plastic',
        'about.company_story': 'Our Company Story',
        'about.since_2010': 'Since 2010',
        'about.company_description_1': 'Öz-Ay Packaging and Plastic was established in Istanbul in 2010. Since our establishment, we have achieved a leading position in the industry with our vision of producing environmentally friendly and sustainable packaging solutions.',
        'about.company_description_2': 'In our modern facilities built on 5,000 m² of closed area, we have a daily production capacity of 50,000 units with our state-of-the-art machines and expert team.',
        'about.company_description_3': 'We serve more than 500 companies across Turkey with our customer satisfaction-oriented working principles and quality standards.',
        'about.vision': 'Our Vision',
        'about.vision_text': 'To become a leading company in Turkey\'s environmentally friendly packaging sector and a brand that sets sustainable production standards and is preferred in international markets.',
        'about.mission': 'Our Mission',
        'about.mission_text': 'To be an organization that adds value to nature and society by offering high-quality, environmentally friendly and economical packaging solutions to our customers, making a difference in the industry with a sustainable production approach.',
        'about.values': 'Our Values',
        'about.values_subtitle': 'The principles underlying our success',
        'about.sustainability': 'Sustainability',
        'about.sustainability_desc': 'Environmentally respectful production processes',
        'about.quality': 'Quality',
        'about.quality_desc': 'Excellence in every product',
        'about.trust': 'Trust',
        'about.trust_desc': 'Transparent and honest business approach',
        'about.innovation': 'Innovation',
        'about.innovation_desc': 'Continuous development and innovation',
        
        // Products Page
        'products.page_title': 'Our Products',
        'products.page_subtitle': 'Wide product range in environmentally friendly packaging solutions',
        'products.categories': 'Our Product Categories',
        'products.categories_subtitle': 'Discover packaging solutions suitable for your needs',
        'products.kutu_desc': 'Cardboard and carton boxes, custom design and printing options',
        'products.baskili_poset_desc': 'Colorful and high-quality printed plastic bags, customized for your brand',
        'products.kagit_ambalaj_desc': 'Kraft paper packaging solutions, 100% recyclable',
        'products.kagit_poset_desc': 'Handled and handleless paper bags, custom printing available',
        'products.pasta_alti_desc': 'Cardboard cake base, various size and weight options',
        'products.kese_kagidi_desc': 'White and kraft paper bags, food compatible',
        'products.view_details': 'View Details',
        'products.cta_title': 'Looking for a Custom Product?',
        'products.cta_text': 'Contact us for custom packaging solutions tailored to your needs. Our expert team is ready to offer you the most suitable solution!',
        
        // Contact Page
        'contact.info_title': 'Contact Information',
        'contact.form_title': 'Contact Form',
        'contact.subtitle': 'Reach out to us, we are happy to help you',
        
        // Product descriptions (index page)
        'products.kutu_desc_index': 'Package your products safely with our custom-designed boxes. Special solutions for your needs with various size, material and printing options.',
        'products.baskili_poset_desc_index': 'Custom-designed bags with professional printing quality that will make your brand stand out. Increase your brand value with our high-quality printing technologies.',
        'products.kagit_ambalaj_desc_index': 'Sustainable packaging option with environmentally friendly paper packaging solutions. Produced with recyclable and nature-friendly materials.',
        'products.kagit_poset_desc_index': 'Durable and environmentally friendly paper bag solutions. Ideal for shopping and promotion. Made from kraft paper, long-lasting use with its robust structure.',
        'products.pasta_alti_desc_index': 'Specially designed, hygienic and safe cake base products for bakeries. Certified materials suitable for use on surfaces in contact with food.',
        'products.kese_kagidi_desc_index': 'Classic and environmentally friendly paper bag solutions. Traditional appearance, modern quality with different size and thickness options.',
        
        // Quality Page
        'quality.title': 'Quality',
        'quality.subtitle': 'Our quality standards and sustainability approach',
        
        // References Page
        'references.page_title': 'Our References',
        'references.page_subtitle': 'We serve Turkey\'s leading brands',
        
        // News Page
        'news.page_title': 'News',
        'news.page_subtitle': 'Latest news from our company and the industry',
        'news.news1_date': 'October 15, 2024',
        'news.news1_title': 'Our New Production Lines Are Operational',
        'news.news1_excerpt': 'As part of our capacity expansion efforts, we have put our new production lines into operation. With our increased production capacity, we can serve our customers faster.',
        'news.news2_date': 'October 10, 2024',
        'news.news2_title': 'Our Trade Fair Participation Completed',
        'news.news2_excerpt': 'This year, we took our place at one of the leading trade fairs in the industry. We introduced our new products and established valuable connections.',
        'news.news3_date': 'October 5, 2024',
        'news.news3_title': 'We Received Our Sustainability Certificate',
        'news.news3_excerpt': 'Our environmentally friendly production processes have been approved by international certification organizations. Our success in sustainability has been certified.',
        'news.coming_soon': 'News will be published here soon.',
        'news.back_to_home': 'Back to Home',
        
        // Contact Page
        'contact.address_text': 'Sample Neighborhood, Sample Street No:1<br>34000 Istanbul, Turkey',
        'contact.address_text_footer': 'Sample Neighborhood, Sample Street No:1<br>Istanbul, Turkey',
        'contact.phone_number': '0 (535) 468 19 68',
        'contact.email_address': 'info@ozay-ambalaj.com',
        
        // Quality Page
        'quality.coming_soon': 'Our quality policy and documents will be available here soon.',
        'quality.back_to_home': 'Back to Home',
        
        // Common
        'common.back_to_home': 'Back to Home',
        'common.back_to_home_text': 'you can return'
    },
    
    de: {
        // Navigation
        'nav.home': 'Startseite',
        'nav.about': 'Über uns',
        'nav.products': 'Produkte',
        'nav.quality': 'Qualität',
        'nav.references': 'Referenzen',
        'nav.news': 'Nachrichten',
        'nav.contact': 'Kontakt',
        
        // Hero Section
        'hero.title': 'Vertrauen in Verpackung,<br>Nachhaltigkeit in der Produktion',
        'hero.subtitle': 'Als Öz-Ay Verpackung und Kunststoff sind wir führend in der Branche mit umweltfreundlichen Verpackungslösungen. Wir schaffen Mehrwert für unsere Kunden mit unseren innovativen Produktionstechnologien und nachhaltigen Ansatz.',
        'hero.cta': 'Jetzt Kontakt aufnehmen',
        
        // Products
        'products.title': 'Unsere Produkte',
        'products.subtitle': 'Wir bieten professionelle Lösungen für alle Ihre Verpackungsbedürfnisse mit unserem breiten Produktsortiment',
        'products.kutu': 'Box',
        'products.baskili_poset': 'Bedruckte Tasche',
        'products.kagit_ambalaj': 'Papierverpackung',
        'products.kagit_poset': 'Papiertüte',
        'products.pasta_alti': 'Kuchenunterlage',
        'products.kese_kagidi': 'Papiertüte',
        'products.request_quote': 'Angebot anfordern',
        
        // Sustainability
        'sustainability.title': 'Nachhaltigkeit und Umwelt',
        'sustainability.subtitle': 'Wir investieren in die Zukunft mit recycelbaren Materialien',
        'sustainability.description': 'Ein großer Teil der Materialien, die wir in unserer Produktion verwenden, sind recycelbar und umweltfreundlich. Mit unserem nachhaltigen Produktionsansatz respektieren wir die Natur und hinterlassen eine lebenswertere Welt für zukünftige Generationen.',
        'sustainability.recyclable': 'Recycelbar',
        
        // References
        'references.title': 'Unsere Referenzen',
        'references.subtitle': 'Wir bedienen die führenden Marken der Türkei',
        'references.all_references': 'Alle Referenzen',
        
        // News
        'news.title': 'Nachrichten',
        'news.subtitle': 'Neueste Nachrichten von unserem Unternehmen und der Branche',
        'news.all_news': 'Alle Nachrichten',
        
        // Contact
        'contact.title': 'Kontakt',
        'contact.form.name': 'Vollständiger Name',
        'contact.form.email': 'E-Mail',
        'contact.form.phone': 'Telefon',
        'contact.form.company': 'Firma',
        'contact.form.subject': 'Betreff',
        'contact.form.message': 'Nachricht',
        'contact.form.kvkk': 'Ich habe den KVKK-Offenlegungstext gelesen und genehmige ihn',
        'contact.form.send': 'Senden',
        
        // Footer
        'footer.address': 'Adresse',
        'footer.phone': 'Telefon',
        'footer.email': 'E-Mail',
        'footer.working_hours': 'Arbeitszeiten',
        'footer.weekdays': 'Montag - Freitag: 08:00 - 18:00',
        'footer.weekends': 'Samstag - Sonntag: 09:00 - 14:00',
        'footer.quick_links': 'Schnelllinks',
        'footer.about': 'Über uns',
        'footer.products': 'Unsere Produkte',
        'footer.quality': 'Qualität & Nachhaltigkeit',
        'footer.references': 'Unsere Referenzen',
        'footer.news': 'Nachrichten',
        'footer.contact': 'Kontakt',
        'footer.description': 'Ein Pionier in umweltfreundlichen und nachhaltigen Verpackungslösungen. Eine vertrauenswürdige Marke in der Branche seit 2010 mit einem qualitätsorientierten Produktions- und kundenorientierten Serviceansatz.',
        'footer.copyright': '© 2022 Artinlife Tech. Alle Rechte vorbehalten.',
        'footer.privacy': 'Datenschutzrichtlinie',
        'footer.cookie': 'Cookie-Richtlinie',
        
        // Common
        'common.discover_products': 'Unsere Produkte entdecken',
        'common.details': 'Details',
        'common.read_more': 'Weiterlesen',
        'common.select': 'Auswählen',
        'common.product_info': 'Produktinformationen',
        'common.technical_support': 'Technischer Support',
        'common.other': 'Andere',
        'common.read_text': '(Text lesen)',
        'common.years_experience': 'Jahre Erfahrung',
        'common.happy_customers': 'Zufriedene Kunden',
        'common.daily_production': 'Tägliche Produktion',
        'common.customer_satisfaction': 'Kundenzufriedenheit',
        'common.contact_us': 'Jetzt Kontakt aufnehmen',
        
        // About Page
        'about.title': 'Über uns',
        'about.subtitle': 'Unsere Erfahrung und Lösungen in der Branche als Öz-Ay Verpackung und Kunststoff',
        'about.company_story': 'Unsere Firmengeschichte',
        'about.since_2010': 'Seit 2010',
        'about.company_description_1': 'Öz-Ay Verpackung und Kunststoff wurde 2010 in Istanbul gegründet. Seit unserer Gründung haben wir eine führende Position in der Branche mit unserer Vision erreicht, umweltfreundliche und nachhaltige Verpackungslösungen zu produzieren.',
        'about.company_description_2': 'In unseren modernen Anlagen auf 5.000 m² geschlossener Fläche haben wir eine tägliche Produktionskapazität von 50.000 Einheiten mit unseren modernsten Maschinen und unserem Expertenteam.',
        'about.company_description_3': 'Wir bedienen mehr als 500 Unternehmen in der gesamten Türkei mit unseren kundenorientierten Arbeitsprinzipien und Qualitätsstandards.',
        'about.vision': 'Unsere Vision',
        'about.vision_text': 'Ein führendes Unternehmen im umweltfreundlichen Verpackungssektor der Türkei zu werden und eine Marke zu sein, die nachhaltige Produktionsstandards setzt und auf internationalen Märkten bevorzugt wird.',
        'about.mission': 'Unsere Mission',
        'about.mission_text': 'Eine Organisation zu sein, die der Natur und der Gesellschaft Mehrwert verleiht, indem wir unseren Kunden hochwertige, umweltfreundliche und wirtschaftliche Verpackungslösungen anbieten und mit einem nachhaltigen Produktionsansatz einen Unterschied in der Branche machen.',
        'about.values': 'Unsere Werte',
        'about.values_subtitle': 'Die Prinzipien, die unserem Erfolg zugrunde liegen',
        'about.sustainability': 'Nachhaltigkeit',
        'about.sustainability_desc': 'Umweltbewusste Produktionsprozesse',
        'about.quality': 'Qualität',
        'about.quality_desc': 'Exzellenz in jedem Produkt',
        'about.trust': 'Vertrauen',
        'about.trust_desc': 'Transparenter und ehrlicher Geschäftsansatz',
        'about.innovation': 'Innovation',
        'about.innovation_desc': 'Kontinuierliche Entwicklung und Innovation',
        
        // Products Page
        'products.page_title': 'Unsere Produkte',
        'products.page_subtitle': 'Breites Produktsortiment in umweltfreundlichen Verpackungslösungen',
        'products.categories': 'Unsere Produktkategorien',
        'products.categories_subtitle': 'Entdecken Sie Verpackungslösungen, die Ihren Bedürfnissen entsprechen',
        'products.kutu_desc': 'Papp- und Kartonboxen, maßgeschneiderte Design- und Druckoptionen',
        'products.baskili_poset_desc': 'Bunte und hochwertige bedruckte Plastiktüten, maßgeschneidert für Ihre Marke',
        'products.kagit_ambalaj_desc': 'Kraftpapier-Verpackungslösungen, 100% recycelbar',
        'products.kagit_poset_desc': 'Tüten mit und ohne Griff, individuelle Druckmöglichkeiten',
        'products.pasta_alti_desc': 'Karton-Kuchenunterlage, verschiedene Größen- und Gewichtsoptionen',
        'products.kese_kagidi_desc': 'Weiße und Kraftpapier-Tüten, lebensmittelecht',
        'products.view_details': 'Details anzeigen',
        'products.cta_title': 'Suchen Sie ein maßgeschneidertes Produkt?',
        'products.cta_text': 'Kontaktieren Sie uns für maßgeschneiderte Verpackungslösungen nach Ihren Bedürfnissen. Unser Expertenteam ist bereit, Ihnen die passendste Lösung anzubieten!',
        
        // Contact Page
        'contact.info_title': 'Kontaktinformationen',
        'contact.form_title': 'Kontaktformular',
        'contact.subtitle': 'Kontaktieren Sie uns, wir helfen Ihnen gerne',
        
        // Product descriptions (index page)
        'products.kutu_desc_index': 'Verpacken Sie Ihre Produkte sicher mit unseren maßgeschneiderten Boxen. Spezielle Lösungen für Ihre Bedürfnisse mit verschiedenen Größen-, Material- und Druckoptionen.',
        'products.baskili_poset_desc_index': 'Maßgeschneiderte Tüten mit professioneller Druckqualität, die Ihre Marke hervorheben. Steigern Sie den Wert Ihrer Marke mit unseren hochwertigen Drucktechnologien.',
        'products.kagit_ambalaj_desc_index': 'Nachhaltige Verpackungsoption mit umweltfreundlichen Papierverpackungslösungen. Hergestellt aus recycelbaren und naturfreundlichen Materialien.',
        'products.kagit_poset_desc_index': 'Langlebige und umweltfreundliche Papiertütenlösungen. Ideal für Einkauf und Werbung. Aus Kraftpapier hergestellt, langlebige Nutzung durch robuste Struktur.',
        'products.pasta_alti_desc_index': 'Speziell für Bäckereien entwickelte, hygienische und sichere Kuchenunterlagen. Zertifizierte Materialien, die für den Kontakt mit Lebensmitteln geeignet sind.',
        'products.kese_kagidi_desc_index': 'Klassische und umweltfreundliche Papiertütenlösungen. Traditionelles Aussehen, moderne Qualität mit verschiedenen Größen- und Dickenoptionen.',
        
        // Quality Page
        'quality.title': 'Qualität',
        'quality.subtitle': 'Unsere Qualitätsstandards und Nachhaltigkeitsansatz',
        
        // References Page
        'references.page_title': 'Unsere Referenzen',
        'references.page_subtitle': 'Wir bedienen die führenden Marken der Türkei',
        
        // News Page
        'news.page_title': 'Nachrichten',
        'news.page_subtitle': 'Neueste Nachrichten von unserem Unternehmen und der Branche',
        'news.news1_date': '15. Oktober 2024',
        'news.news1_title': 'Unsere neuen Produktionslinien sind in Betrieb',
        'news.news1_excerpt': 'Im Rahmen unserer Kapazitätserweiterungsbemühungen haben wir unsere neuen Produktionslinien in Betrieb genommen. Mit unserer erhöhten Produktionskapazität können wir unsere Kunden schneller bedienen.',
        'news.news2_date': '10. Oktober 2024',
        'news.news2_title': 'Unsere Messeteilnahme abgeschlossen',
        'news.news2_excerpt': 'Dieses Jahr haben wir unseren Platz auf einer der führenden Messen der Branche eingenommen. Wir haben unsere neuen Produkte vorgestellt und wertvolle Verbindungen geknüpft.',
        'news.news3_date': '5. Oktober 2024',
        'news.news3_title': 'Wir haben unser Nachhaltigkeitszertifikat erhalten',
        'news.news3_excerpt': 'Unsere umweltfreundlichen Produktionsprozesse wurden von internationalen Zertifizierungsorganisationen genehmigt. Unser Erfolg in der Nachhaltigkeit wurde zertifiziert.',
        'news.coming_soon': 'Nachrichten werden hier bald veröffentlicht.',
        'news.back_to_home': 'Zur Startseite',
        
        // Contact Page
        'contact.address_text': 'Beispielviertel, Beispielstraße Nr. 1<br>34000 Istanbul, Türkei',
        'contact.address_text_footer': 'Beispielviertel, Beispielstraße Nr. 1<br>Istanbul, Türkei',
        'contact.phone_number': '0 (535) 468 19 68',
        'contact.email_address': 'info@ozay-ambalaj.com',
        
        // Quality Page
        'quality.coming_soon': 'Unsere Qualitätspolitik und Dokumente werden hier bald verfügbar sein.',
        'quality.back_to_home': 'Zur Startseite',
        
        // Common
        'common.back_to_home': 'Zur Startseite',
        'common.back_to_home_text': 'können Sie zurückkehren'
    }
};

// ============================================================================
// Language Switcher - Changes URL to /pages/{lang}/ format and applies translations
// ============================================================================

(function() {
    'use strict';

    // Function to get translation
    function getTranslation(key, lang) {
        if (!window.Translations || !window.Translations[lang]) {
            return null;
        }
        return window.Translations[lang][key] || null;
    }

    // Store original Turkish content to restore when switching back to TR
    const originalContent = {};
    
    // Function to apply translations
    function applyTranslations(lang) {
        // Check if Translations object exists
        if (!window.Translations) {
            console.warn('Translations object not found');
            return;
        }
        
        const elements = document.querySelectorAll('[data-i18n]');
        
        elements.forEach(function(element) {
            const key = element.getAttribute('data-i18n');
            if (key) {
                // If switching to Turkish, restore original content
                if (lang === 'tr') {
                    // Check if we have stored original content
                    if (originalContent[key] !== undefined) {
                        if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                            if (element.type === 'submit' || element.type === 'button') {
                                element.value = originalContent[key];
                            } else if (element.type === 'text' || element.type === 'email' || element.type === 'tel') {
                                element.placeholder = originalContent[key];
                            }
                        } else if (element.tagName === 'BUTTON') {
                            element.textContent = originalContent[key];
                        } else if (element.tagName === 'OPTION') {
                            element.textContent = originalContent[key];
                        } else {
                            element.innerHTML = originalContent[key];
                        }
                    }
                    // If no stored content, assume it's already in Turkish (first load)
                } else {
                    // For non-Turkish languages, store original content first time only
                    if (originalContent[key] === undefined) {
                        if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                            if (element.type === 'submit' || element.type === 'button') {
                                originalContent[key] = element.value;
                            } else if (element.type === 'text' || element.type === 'email' || element.type === 'tel') {
                                originalContent[key] = element.placeholder || '';
                            }
                        } else if (element.tagName === 'BUTTON') {
                            originalContent[key] = element.textContent;
                        } else if (element.tagName === 'OPTION') {
                            originalContent[key] = element.textContent;
                        } else {
                            originalContent[key] = element.innerHTML;
                        }
                    }
                    
                    // Apply translation
                    if (!window.Translations[lang]) {
                        console.warn('Translations not found for language:', lang);
                        return;
                    }
                    
                    const translation = getTranslation(key, lang);
                    if (translation) {
                        if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                            if (element.type === 'submit' || element.type === 'button') {
                                element.value = translation;
                            } else if (element.type === 'text' || element.type === 'email' || element.type === 'tel') {
                                element.placeholder = translation;
                            }
                        } else if (element.tagName === 'BUTTON') {
                            element.textContent = translation;
                        } else if (element.tagName === 'OPTION') {
                            element.textContent = translation;
                        } else {
                            // For other elements, replace innerHTML (to support <br> tags)
                            element.innerHTML = translation;
                        }
                    } else {
                        console.warn('Translation not found for key:', key, 'language:', lang);
                    }
                }
            }
        });
    }

    // Function to get current language from URL
    // URL format: baseurl/pages/{lang}/page.html (e.g., /pages/tr/index.html, /pages/en/index.html)
    function getCurrentLang() {
        const pathname = window.location.pathname;
        
        // Check if URL has /pages/{lang}/ format (e.g., /pages/tr/index.html, /pages/en/index.html)
        // This regex works for both root and subdirectory installations
        const match = pathname.match(/\/pages\/(tr|en|de)\//);
        if (match) {
            const lang = match[1];
            return lang;
        }
        
        // Fallback: check if URL has /{lang}/ format (for compatibility)
        const langMatch = pathname.match(/^\/(tr|en|de)\//);
        if (langMatch) {
            const lang = langMatch[1];
            return lang;
        }
        
        return 'tr'; // Default
    }

    // Function to change language (applies translations on current page)
    // Since we don't have separate EN/DE pages, we apply translations dynamically
    function changeLanguage(lang) {
        // If clicking the same language, do nothing
        const currentLang = getCurrentLang();
        if (currentLang === lang) {
            return;
        }
        
        // Update URL without reloading (using History API)
        const currentPath = window.location.pathname;
        const basePath = window.__BASE_PATH || '/';
        
        // Extract current page name
        let pageName = 'index.html';
        
        // Try to extract page name from current URL
        if (currentPath.includes('/pages/')) {
            const pagesMatch = currentPath.match(/\/pages\/(tr|en|de)\/(.+)$/);
            if (pagesMatch) {
                pageName = pagesMatch[2] || 'index.html';
            } else {
                const parts = currentPath.split('/pages/');
                if (parts.length > 1) {
                    const pathAfterPages = parts[1];
                    const pathParts = pathAfterPages.split('/');
                    if (pathParts.length > 1) {
                        pageName = pathParts.slice(1).join('/') || 'index.html';
                    } else {
                        pageName = 'index.html';
                    }
                }
            }
        } else {
            const parts = currentPath.split('/').filter(function(p) { return p; });
            if (parts.length > 0) {
                const lastPart = parts[parts.length - 1];
                if (lastPart.endsWith('.html')) {
                    pageName = lastPart;
                }
            }
        }
        
        // Ensure pageName is not empty
        if (!pageName || pageName === '') {
            pageName = 'index.html';
        }
        
        // Build new URL: /pages/{lang}/{pageName}
        let newUrl;
        if (basePath === '/' || basePath === '') {
            newUrl = '/pages/' + lang + '/' + pageName;
        } else {
            const cleanBasePath = basePath.replace(/\/$/, '');
            newUrl = cleanBasePath + '/pages/' + lang + '/' + pageName;
        }
        
        // Update URL in browser without reloading
        if (window.history && window.history.pushState) {
            window.history.pushState({lang: lang}, '', newUrl);
        }
        
        // Apply translations to current page
        applyTranslations(lang);
        
        // Update language attribute
        document.documentElement.lang = lang;
        
        // Update Content-Language meta tag
        let metaLang = document.querySelector('meta[http-equiv="Content-Language"]');
        if (!metaLang) {
            metaLang = document.createElement('meta');
            metaLang.setAttribute('http-equiv', 'Content-Language');
            document.head.appendChild(metaLang);
        }
        metaLang.setAttribute('content', lang);
        
        // Update active button state
        setupLanguageButtons(lang);
        
        // Update internal links
        updateInternalLinks();
        
        // Save language preference to localStorage
        try {
            localStorage.setItem('preferredLanguage', lang);
        } catch (e) {
            console.warn('Could not save language preference:', e);
        }
    }

    // Function to update internal links to preserve language code
    // URL format: baseurl/pages/{lang}/page.html (e.g., /pages/tr/index.html, /pages/en/index.html)
    function updateInternalLinks() {
        const currentLang = getCurrentLang();
        const basePath = window.__BASE_PATH || '/';
        
        // Update all internal links to include language code
        const links = document.querySelectorAll('a[href]');
        links.forEach(function(link) {
            const href = link.getAttribute('href');
            if (href && !href.startsWith('http') && !href.startsWith('#') && !href.startsWith('mailto:') && !href.startsWith('tel:')) {
                // Skip if already has /pages/{lang}/ format
                if (!href.match(/\/pages\/(tr|en|de)\//)) {
                    // Skip if has /{lang}/ format (will be redirected by .htaccess)
                    if (!href.match(/^\/(tr|en|de)\//)) {
                        // If it's a relative link to an HTML file
                        if (href.endsWith('.html') || href === '' || href === '/') {
                            const cleanHref = href.replace(/^\.\//, '').replace(/^\//, '') || 'index.html';
                            const newHref = basePath.replace(/\/$/, '') + '/pages/' + currentLang + '/' + cleanHref;
                            link.setAttribute('href', newHref);
                        }
                    }
                }
            }
        });
    }

    // Function to initialize
    function init() {
        // Wait for Translations object to be available
        if (!window.Translations) {
            setTimeout(init, 50);
            return;
        }
        
        const currentLang = getCurrentLang();
        
        // Update html lang attribute
        document.documentElement.lang = currentLang;
        
        // Update Content-Language meta tag
        let metaLang = document.querySelector('meta[http-equiv="Content-Language"]');
        if (!metaLang) {
            metaLang = document.createElement('meta');
            metaLang.setAttribute('http-equiv', 'Content-Language');
            document.head.appendChild(metaLang);
        }
        metaLang.setAttribute('content', currentLang);
        
        // Apply translations for current language
        applyTranslations(currentLang);
        
        // Update internal links to preserve language code
        updateInternalLinks();
        
        // Setup language toggle buttons
        setupLanguageButtons(currentLang);
    }
    
    // Global event delegation for language buttons - works even if buttons are loaded later
    // Use document-level delegation so it always works
    (function setupGlobalLanguageListener() {
        // Only setup once
        if (document.languageListenerSetup) {
            return;
        }
        document.languageListenerSetup = true;
        
        // Use document-level event delegation
        document.addEventListener('click', function(e) {
            // Find the clicked button by traversing up the DOM tree
            let target = e.target;
            
            // Traverse up to find button with data-lang attribute
            while (target && target !== document) {
                // Check if current element is a language button
                if (target.tagName === 'BUTTON' && target.hasAttribute('data-lang')) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    const clickedLang = target.getAttribute('data-lang');
                    if (clickedLang) {
                        changeLanguage(clickedLang);
                    }
                    return;
                }
                
                // Check if we're inside .lang-toggle container
                if (target.classList && target.classList.contains('lang-toggle')) {
                    // Find which button was clicked
                    const buttons = target.querySelectorAll('button[data-lang]');
                    for (let i = 0; i < buttons.length; i++) {
                        const btn = buttons[i];
                        if (btn === e.target || btn.contains(e.target)) {
                            e.preventDefault();
                            e.stopPropagation();
                            
                            const clickedLang = btn.getAttribute('data-lang');
                            if (clickedLang) {
                                changeLanguage(clickedLang);
                            }
                            return;
                        }
                    }
                }
                
                target = target.parentElement;
            }
        }, true); // Use capture phase
    })();
    
    // Legacy function for compatibility (now just updates button states)
    function setupLanguageButtonDelegation() {
        // Buttons are already handled by global listener, just update states
        const langToggleContainer = document.querySelector('.lang-toggle');
        if (langToggleContainer) {
            // Ensure buttons are clickable
            const buttons = langToggleContainer.querySelectorAll('button[data-lang]');
            buttons.forEach(function(btn) {
                btn.style.pointerEvents = 'auto';
                btn.style.cursor = 'pointer';
                btn.setAttribute('tabindex', '0');
                btn.disabled = false;
            });
        }
    }
    
    // Function to setup language toggle buttons (can be called multiple times)
    function setupLanguageButtons(currentLang) {
        
        // Update active state on lang-toggle buttons
        const langButtons = document.querySelectorAll('.lang-toggle button[data-lang]');
        
        // If no buttons found, container may not be loaded yet (partials)
        if (langButtons.length === 0) {
            // Will retry when partials are loaded
            return;
        }
        
        // Update active states
        langButtons.forEach(function(btn) {
            const lang = btn.getAttribute('data-lang');
            const isActive = lang === currentLang;
            
            // Remove active class from all buttons first
            btn.classList.remove('active');
            
            // Add active class only to current language button
            if (isActive) {
                btn.classList.add('active');
            }
            
            // Ensure buttons are clickable
            btn.style.pointerEvents = 'auto';
            btn.style.cursor = 'pointer';
            btn.setAttribute('tabindex', '0');
            btn.disabled = false;
            
            // Handle clicks on images inside buttons
            const img = btn.querySelector('img');
            if (img) {
                img.style.pointerEvents = 'none';
            }
        });
        
        // Setup event delegation (more reliable than individual listeners)
        setupLanguageButtonDelegation();
        
    }
    
    // Export function for external use (e.g., when partials are loaded)
    window.reinitTranslations = function() {
        const currentLang = getCurrentLang();
        applyTranslations(currentLang);
        // Wait a bit for DOM to settle
        setTimeout(function() {
            setupLanguageButtons(currentLang);
            updateInternalLinks();
        }, 50);
    };

    // Initialize when DOM is ready
    // Wait a bit to ensure all scripts are loaded
    function startInit() {
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', function() {
                setTimeout(init, 200);
            });
        } else {
            setTimeout(init, 200);
        }
    }
    
    // Listen for partials loaded event
    document.addEventListener('partialsLoaded', function() {
        setTimeout(function() {
            if (window.reinitTranslations) {
                window.reinitTranslations();
            } else {
                console.warn('reinitTranslations function not found!');
            }
        }, 200);
    });
    
    // Start initialization
    startInit();
})();


